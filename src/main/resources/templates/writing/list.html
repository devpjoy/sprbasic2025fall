<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Writing List</title>

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>
<body>

List!!

<div id="div_list">

</div>

<button onclick="list_writing()">목록 조회</button>
<script>
    function list_writing() {
        alert("등록이 시작됩니다!");
        $.ajax({
            url: '/api/writing/list', // RequestMapping에서 정의한 주소
            method: 'GET',
            data : {},
            dataType : "json",
            contentType:"application/json",
            success: function (data, status, xhr) { // 성공 시 alert 띄워줌
                alert("data :" + JSON.stringify(data));
                // 서버에서 보낸 데이터 전체를 확인.
                // json을 string으로 바꿔서 표기.
                let list = data["data"];
                for(let each of list){
                    let id = each["id"];
                    let title = each["title"];
                    let content = each["content"];

                    $("#div_list").append( //html 코드를 덧붙일 때 append 사용
                        // "<div>"+title+"</div>"
                        // opt + ~ 누르면 `` 나옴.
                        `<div onclick="location.href='/writing/detatil/${id}">${title} // ${content}</div>`
                    )
                }
            },
            error: function (data, status, err) {
                // 우리가 잘못하지 않아도 가끔 네트워크 오류로 인해 error 되는 경우 있음
                alert("error :" + JSON.stringify(data));
            },
            complete: function () {
                // complete : error가 나든, success가 나든 상관없이 요청이 끝나면 무조건 실행되는 부분
                // 사실 크게 실행할 일은 없음
            }
        });
    }
</script>
</body>
</html>